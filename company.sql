/*
 Navicat Premium Data Transfer

 Source Server         : localhost_3306
 Source Server Type    : MySQL
 Source Server Version : 50553
 Source Host           : localhost:3306
 Source Schema         : company

 Target Server Type    : MySQL
 Target Server Version : 50553
 File Encoding         : 65001

 Date: 13/05/2019 14:57:59
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for think_article
-- ----------------------------
DROP TABLE IF EXISTS `think_article`;
CREATE TABLE `think_article`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `cid` int(11) NULL DEFAULT NULL COMMENT '栏目id',
  `title` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '标题',
  `description` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '描述',
  `content` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '内容',
  `keyword` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关键字',
  `source` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '来源',
  `author` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '作者',
  `time` int(11) NULL DEFAULT NULL COMMENT '时间',
  `image` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '标题图',
  `status` int(11) NULL DEFAULT 1 COMMENT '状态',
  `pic` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '栏目标题图',
  `num` int(11) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 31 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Records of think_article
-- ----------------------------
INSERT INTO `think_article` VALUES (1, 2, '关于博主', '好想被风刮走  刮遍整个地球的那种  在我爱的城市停走停走  是谁把冲动说成青春期躁动  以为还十五六  一个人易沉默  两个人太啰嗦  有话题的时候认定你是好朋友', '<p>PhpSpreadsheet是一个纯PHP编写的组件库，它使用现代PHP写法，代码质量和性能比PHPExcel高不少，完全可以替代PHPExcel（PHPExcel已不再维护）。使用PhpSpreadsheet可以轻松读取和写入Excel文档，支持Excel的所有操作。</p><p><br/></p><h3>软件依赖<br/><br/></h3><p>要使用PhpSpreadsheet需要满足以下条件：<br/></p><ol class=\" list-paddingleft-2\" style=\"list-style-type: decimal;\"><li><p>PHP5.6或更改版本，推荐PHP7</p></li><li><p>支持php_zip扩展</p></li><li><p>支持php_xml扩展</p></li><li><p>支持php_gd2扩展</p></li></ol><p><br/></p><h3>安装<br/><br/></h3><p>现在开始，进入项目目录。</p><p>使用composer安装</p><p><br/></p><pre class=\"brush:php;toolbar:false\">composer&nbsp;require&nbsp;phpoffice/phpspreadsheet</pre><p><br/></p><h3>如何读取<br/></h3><p><br/></p><pre class=\"brush:php;toolbar:false\">use&nbsp;PhpOffice\\PhpSpreadsheet\\Spreadsheet;\r\nuse&nbsp;PhpOffice\\PhpSpreadsheet\\Writer\\Xlsx;\r\n\r\npublic&nbsp;function&nbsp;more($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ini_set(&#39;max_execution_time&#39;,&nbsp;&#39;1000&#39;);&nbsp;&nbsp;//设置服务器最大响应时间\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$reader&nbsp;=&nbsp;\\PhpOffice\\PhpSpreadsheet\\IOFactory::createReader(&#39;Xlsx&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$reader-&gt;setReadDataOnly(TRUE);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$path&nbsp;=&nbsp;db(&#39;file&#39;)-&gt;where(&#39;id&#39;,$id)-&gt;value(&#39;path&#39;);//查询已经上传的excel的路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$excel&nbsp;=&nbsp;ROOT_PATH&nbsp;.&nbsp;&#39;public/&#39;&nbsp;.&nbsp;&#39;uploads/&#39;&nbsp;.&nbsp;$path;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$spreadsheet&nbsp;=&nbsp;$reader-&gt;load($excel);&nbsp;//载入excel表格\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$worksheet&nbsp;=&nbsp;$spreadsheet-&gt;getActiveSheet();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$highestRow&nbsp;=&nbsp;$worksheet-&gt;getHighestRow();&nbsp;//&nbsp;总行数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$highestColumn&nbsp;=&nbsp;$worksheet-&gt;getHighestColumn();&nbsp;//&nbsp;总列数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$highestColumnIndex&nbsp;=&nbsp;\\PhpOffice\\PhpSpreadsheet\\Cell\\Coordinate::columnIndexFromString($highestColumn);&nbsp;//&nbsp;e.g.&nbsp;5\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($row&nbsp;=&nbsp;0;&nbsp;$row&nbsp;&lt;=&nbsp;$highestRow;&nbsp;$row++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i&nbsp;=&nbsp;&#39;A&#39;;&nbsp;$i&nbsp;&lt;=&nbsp;$highestColumn;&nbsp;$i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[$row][]&nbsp;=&nbsp;$worksheet-&gt;getCell($i.$row)-&gt;getValue();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p><br/></p>', '1', '1', '1', 1552640321, NULL, 1, '', 4);
INSERT INTO `think_article` VALUES (6, 6, 'TP5框架使用PhpSpreadsheet读取和写入Excel', 'PhpSpreadsheet是一个纯PHP编写的组件库，它使用现代PHP写法，代码质量和性能比PHPExcel高不少，完全可以替代PHPExcel（PHPExcel已不再维护）。使用PhpSpreadsheet可以轻松读取和写入Excel文档，支持Excel的所有操作。', '<p>PhpSpreadsheet是一个纯PHP编写的组件库，它使用现代PHP写法，代码质量和性能比PHPExcel高不少，完全可以替代PHPExcel（PHPExcel已不再维护）。使用PhpSpreadsheet可以轻松读取和写入Excel文档，支持Excel的所有操作。</p><p><br/></p><h3>软件依赖<br/><br/></h3><p>要使用PhpSpreadsheet需要满足以下条件：<br/></p><ol class=\" list-paddingleft-2\" style=\"list-style-type: decimal;\"><li><p>PHP5.6或更改版本，推荐PHP7</p></li><li><p>支持php_zip扩展</p></li><li><p>支持php_xml扩展</p></li><li><p>支持php_gd2扩展</p></li></ol><p><br/></p><h3>安装<br/><br/></h3><p>现在开始，进入项目目录。</p><p>使用composer安装</p><p><br/></p><pre class=\"brush:php;toolbar:false\">composer&nbsp;require&nbsp;phpoffice/phpspreadsheet</pre><p><br/></p><h3>如何读取<br/></h3><p><br/></p><pre class=\"brush:php;toolbar:false\">use&nbsp;PhpOffice\\PhpSpreadsheet\\Spreadsheet;\r\nuse&nbsp;PhpOffice\\PhpSpreadsheet\\Writer\\Xlsx;\r\n\r\npublic&nbsp;function&nbsp;more($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ini_set(&#39;max_execution_time&#39;,&nbsp;&#39;1000&#39;);&nbsp;&nbsp;//设置服务器最大响应时间\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$reader&nbsp;=&nbsp;\\PhpOffice\\PhpSpreadsheet\\IOFactory::createReader(&#39;Xlsx&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$reader-&gt;setReadDataOnly(TRUE);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$path&nbsp;=&nbsp;db(&#39;file&#39;)-&gt;where(&#39;id&#39;,$id)-&gt;value(&#39;path&#39;);//查询已经上传的excel的路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$excel&nbsp;=&nbsp;ROOT_PATH&nbsp;.&nbsp;&#39;public/&#39;&nbsp;.&nbsp;&#39;uploads/&#39;&nbsp;.&nbsp;$path;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$spreadsheet&nbsp;=&nbsp;$reader-&gt;load($excel);&nbsp;//载入excel表格\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$worksheet&nbsp;=&nbsp;$spreadsheet-&gt;getActiveSheet();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$highestRow&nbsp;=&nbsp;$worksheet-&gt;getHighestRow();&nbsp;//&nbsp;总行数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$highestColumn&nbsp;=&nbsp;$worksheet-&gt;getHighestColumn();&nbsp;//&nbsp;总列数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$highestColumnIndex&nbsp;=&nbsp;\\PhpOffice\\PhpSpreadsheet\\Cell\\Coordinate::columnIndexFromString($highestColumn);&nbsp;//&nbsp;e.g.&nbsp;5\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($row&nbsp;=&nbsp;0;&nbsp;$row&nbsp;&lt;=&nbsp;$highestRow;&nbsp;$row++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i&nbsp;=&nbsp;&#39;A&#39;;&nbsp;$i&nbsp;&lt;=&nbsp;$highestColumn;&nbsp;$i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[$row][]&nbsp;=&nbsp;$worksheet-&gt;getCell($i.$row)-&gt;getValue();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dump($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p><br/></p>', 'PhpSpreadsheet,PHPExcel,PhpSpreadsheet读取,写入Excel', '胡鹏成的个人博客', '胡鹏成', 1535687443, NULL, 1, '/uploads/20180830/20a87cf1bda9f8af28439fc92f9677bc.jpg', 249);
INSERT INTO `think_article` VALUES (7, 6, 'XAMPP 虚拟主机配置', 'XAMPP 虚拟主机配置详细操作', '<h3>一、修改httpd.conf</h3><p><br/></p><p>文件目录 xampp =&gt; apach e=&gt;httpd.conf&nbsp;<br/>1.在文件内搜索 关键字“httpd-vhosts.conf”,找到如下字段</p><p><br/></p><pre class=\"brush:php;toolbar:false\">#&nbsp;Virtual&nbsp;hosts\r\nInclude&nbsp;conf/extra/httpd-vhosts.conf//确保此段开头没有#</pre><p><br/></p><p>2.在文件内搜索关键字“AllowOverride All”，找到如下字段</p><p><br/></p><pre class=\"brush:php;toolbar:false\">&lt;Directory&nbsp;&quot;D:/xampp/cgi-bin&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;AllowOverride&nbsp;All\r\n&nbsp;&nbsp;&nbsp;&nbsp;Options&nbsp;None\r\n&nbsp;&nbsp;&nbsp;&nbsp;Require&nbsp;all&nbsp;granted\r\n&lt;/Directory&gt;\r\n&nbsp;\r\n//修改为\r\n&lt;Directory&nbsp;&quot;D:/xampp/cgi-bin&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;Options&nbsp;Indexes&nbsp;FollowSymLinks&nbsp;Includes&nbsp;ExecCGI\r\n&nbsp;&nbsp;&nbsp;&nbsp;AllowOverride&nbsp;All\r\n&nbsp;&nbsp;&nbsp;&nbsp;Order&nbsp;allow,deny\r\n&nbsp;&nbsp;&nbsp;&nbsp;Allow&nbsp;from&nbsp;all\r\n&lt;/Directory&gt;</pre><p><br/></p><p>3.搜索字段“DocumentRoot”，如下</p><p><br/></p><pre class=\"brush:php;toolbar:false\">DocumentRoot&nbsp;&quot;D:/xampp/htdocs&quot;//确保此处路径是你要访问的项目的根路径</pre><p><br/></p><p>4.如果想自定义配置端口，搜索字段“Listen 80”，找到如下</p><p><br/></p><pre class=\"brush:php;toolbar:false\">Listen&nbsp;80\r\n//在此添加你想监听的端口，如\r\nListen&nbsp;80\r\nListen&nbsp;8080\r\nListen&nbsp;8099\r\n....</pre><p><br/></p><h3>二、修改httpd-vhosts.conf</h3><p><br/></p><p>文件目录 xampp =&gt; apache =&gt;conf =&gt; extra =&gt; httpd-vhosts.conf<br/>文件最后面可看到如下</p><p><br/></p><pre class=\"brush:php;toolbar:false\">##&lt;VirtualHost&nbsp;*:80&gt;\r\n##ServerAdmin&nbsp;webmaster@dummy-host2.example.com\r\n##DocumentRoot&nbsp;&quot;D:/xampp/htdocs/dummy-host2.example.com&quot;\r\n##ServerName&nbsp;dummy-host2.example.com\r\n##ErrorLog&nbsp;&quot;logs/dummy-host2.example.com-error.log&quot;\r\n##CustomLog&nbsp;&quot;logs/dummy-host2.example.com-access.log&quot;&nbsp;common\r\n##&lt;/VirtualHost&gt;</pre><p><br/></p><p>1.站点1</p><p><br/></p><pre class=\"brush:php;toolbar:false\">&lt;VirtualHost&nbsp;80&gt;//设置访问的ip\r\n&nbsp;&nbsp;&nbsp;&nbsp;##ServerAdmin&nbsp;webmaster@dummy-host2.example.com\r\n&nbsp;&nbsp;&nbsp;&nbsp;DocumentRoot&nbsp;&quot;D:/xampp/htdocs&quot;//你的项目文件目录\r\n&nbsp;&nbsp;&nbsp;&nbsp;ServerName&nbsp;&nbsp;www.project.com//此项目的名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;##ErrorLog&nbsp;&quot;logs/dummy-host2.example.com-error.log&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;##CustomLog&nbsp;&quot;logs/dummy-host2.example.com-access.log&quot;&nbsp;common\r\n&lt;/VirtualHost&gt;</pre><p><br/></p><p><br/></p><p>2.站点2</p><p><br/></p><pre class=\"brush:php;toolbar:false\">&lt;VirtualHost&nbsp;*:81&gt;\r\n##ServerAdmin&nbsp;webmaster@dummy-host2.example.com\r\nDocumentRoot&nbsp;&quot;D:/xampp/htdocs&quot;//你的项目文件目录\r\nServerName&nbsp;www.project.com//此项目的名称\r\n##ErrorLog&nbsp;&quot;logs/dummy-host2.example.com-error.log&quot;\r\n##CustomLog&nbsp;&quot;logs/dummy-host2.example.com-access.log&quot;&nbsp;common\r\n&lt;/VirtualHost&gt;</pre><p><br/></p><p>3.配置hosts文件</p><p><br/></p><pre class=\"brush:php;toolbar:false\">文件目录&nbsp;C:\\Windows\\System32\\drivers\\etc\\hosts\r\n127.0.0.1&nbsp;&nbsp;&nbsp;www.project.com</pre><p><br/></p><p style=\"box-sizing: border-box; outline: 0px; padding: 0px; margin: 8px 0px 16px; font-size: 28px; color: rgb(79, 79, 79); line-height: 36px; word-break: break-all; font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; white-space: normal; background-color: rgb(255, 255, 255);\"><br/></p><h3 style=\"box-sizing: border-box; outline: 0px; padding: 0px; margin: 8px 0px 16px; font-size: 28px; color: rgb(79, 79, 79); line-height: 36px; word-break: break-all; font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; white-space: normal; background-color: rgb(255, 255, 255);\">三、修改完记得重启aphache在进行访问</h3><p><br/></p><p>如果需要通过配置的虚拟地址访问项目不用跟端口号的话，只需要所有项目都监听80端口，但是指向的虚拟地址要指向不同的地址。</p><p><br/></p>', '虚拟主机配置，XAMPP', '胡鹏成', '胡鹏成', 1542265704, NULL, 1, '/uploads/20180830/73aafe80cb88a29c4dcfcd569dece578.jpg', 110);
INSERT INTO `think_article` VALUES (8, 6, 'PHP获取当前空间大小和可用空间大小', 'PHP获取当前空间大小和可用空间大小', '<pre class=\"brush:php;toolbar:false\">$free=&nbsp;round(@disk_free_space(&quot;.&quot;)/(1024*1024*1024),3);&nbsp;//可用\r\n$total=&nbsp;round(@disk_total_space(&quot;.&quot;)/(1024*1024*1024),3);&nbsp;//总\r\n$used=$total-$free;\r\n$usp=&nbsp;(floatval($total)!=0)?round($used/$total*100,2):0;</pre><p><br/></p>', '获取当前空间大小,可用空间大小', '胡鹏成的个人博客', '胡鹏成', 1536203296, NULL, 1, '/uploads/20180906/8d6fc9d18d3d5df7181c43571d745c01.jpg', 95);
INSERT INTO `think_article` VALUES (9, 4, '判断某对象是否拥有某一属性', '不过要小心，如果in判断一个属性存在，这个属性不一定是xiaoming的，它可能是xiaoming继承得到的', '<pre class=\"brush:js;toolbar:false\">var&nbsp;xiaoming&nbsp;=&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;小明&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;birth:&nbsp;1990,\r\n&nbsp;&nbsp;&nbsp;&nbsp;school:&nbsp;&#39;No.1&nbsp;Middle&nbsp;School&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;1.70,\r\n&nbsp;&nbsp;&nbsp;&nbsp;weight:&nbsp;65,\r\n&nbsp;&nbsp;&nbsp;&nbsp;score:&nbsp;null\r\n};\r\n&#39;name&#39;&nbsp;in&nbsp;xiaoming;&nbsp;//&nbsp;true\r\n&#39;grade&#39;&nbsp;in&nbsp;xiaoming;&nbsp;//&nbsp;false</pre><p><br/></p><p>不过要小心，如果in判断一个属性存在，这个属性不一定是xiaoming的，它可能是xiaoming继承得到的</p><p><br/></p><p><br/></p><p>因为toString定义在object对象中，而所有对象最终都会在原型链上指向object，所以xiaoming也拥有toString属性。</p><p><br/></p><p>要判断一个属性是否是xiaoming自身拥有的，而不是继承得到的，可以用hasOwnProperty()方法：</p><pre class=\"brush:js;toolbar:false\">var&nbsp;xiaoming&nbsp;=&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&#39;小明&#39;\r\n};\r\nxiaoming.hasOwnProperty(&#39;name&#39;);&nbsp;//&nbsp;true\r\nxiaoming.hasOwnProperty(&#39;toString&#39;);&nbsp;//&nbsp;false</pre><p><br/></p>', '判断某对象是否拥有某一属性', '胡鹏成的个人博客', '胡鹏成', 1536549921, NULL, 1, '/uploads/20180910/803e6f12440ee587b90668e297a1101c.jpg', 109);
INSERT INTO `think_article` VALUES (10, 7, 'jQuery实现Ajax提交表单', 'jQuery实现Ajax提交数据。', '<p><strong>jQuery部分<br/></strong></p><p><strong><br/></strong></p><pre class=\"brush:js;toolbar:false\">//当提交表单时触发函数\r\n$(&quot;form&quot;).submit(&nbsp;function&nbsp;(e)&nbsp;{\r\n//当点击提交按钮时阻止对表单的默认提交\r\ne.preventDefault();\r\n//获取表单数据\r\nvar&nbsp;data&nbsp;=&nbsp;$(&quot;form&quot;).serializeArray();\r\n//获取表单提交地址\r\nvar&nbsp;url&nbsp;=&nbsp;$(&quot;form&quot;).attr(&#39;action&#39;);\r\n$.ajax({&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;type:&#39;POST&#39;,&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;dataType:&quot;json&quot;,&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;url:url,&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;data:data,&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;success:function(obj){&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(obj.code&nbsp;==&nbsp;1){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layer.msg(obj.msg,{icon:&nbsp;6,time:&nbsp;1000},function(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.location.replace(&quot;{:url(&#39;admin/article/index&#39;)}&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layer.msg(obj.msg,{icon:&nbsp;5,time:&nbsp;1000});\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;});\r\n\r\n});</pre><p></p><p><strong>HTML和PHP代码没有什么特殊的不做阐述</strong><br/></p>', 'jQuery,Ajax', '胡鹏成的个人默克', '胡鹏成', 1537163487, NULL, 1, '/uploads/20180917/11576a3d43c4bda0d8b720cbd8c45f0b.jpg', 64);
INSERT INTO `think_article` VALUES (11, 7, 'jQuery Validate前端验证+Ajax提交', 'jQuery Validate 插件为表单提供了强大的验证功能，让客户端表单验证变得更简单，同时提供了大量的定制选项，满足应用程序各种需求。', '<p><strong>引入js</strong></p><p><strong><br/></strong></p><pre class=\"brush:js;toolbar:false\">&lt;!--&nbsp;Jquery&nbsp;Validate&nbsp;--&gt;\r\n&lt;script&nbsp;src=&quot;js/plugins/slimscroll/jquery.slimscroll.min.js&quot;&gt;&lt;/script&gt;\r\n&lt;script&nbsp;src=&quot;js/plugins/validate/jquery.validate.min.js&quot;&gt;&lt;/script&gt;\r\n&lt;script&nbsp;src=&quot;js/plugins/validate/messages_zh.min.js&quot;&gt;&lt;/script&gt;</pre><p><br/></p><p><strong>jQuery代码部分</strong></p><p><strong><br/></strong></p><pre class=\"brush:js;toolbar:false\">$().ready(function()&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;在键盘按下并释放及提交后验证提交表单\r\n&nbsp;&nbsp;&nbsp;&nbsp;$(&quot;#signupForm&quot;).validate({\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//验证成功时候ajax提交\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;submitHandler:&nbsp;function(form)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;$(&quot;.config&quot;).serializeArray();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;url&nbsp;=&nbsp;$(&quot;.config&quot;).attr(&#39;action&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$.ajax({&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&#39;POST&#39;,&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataType:&quot;json&quot;,&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:url,&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:data,&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success:function(obj){&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(obj.code&nbsp;==&nbsp;1){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layer.msg(obj.msg,{icon:&nbsp;6,time:&nbsp;1000},function(){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.location.href&nbsp;=&nbsp;obj.url&nbsp;+&nbsp;&#39;.html&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layer.msg(obj.msg,{icon:&nbsp;5,time:&nbsp;1000});\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rules:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account:&nbsp;&quot;required&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nickname:&nbsp;&quot;required&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;&quot;required&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passwords:{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required:&nbsp;true,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalTo:&nbsp;&quot;#password&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email:&quot;required&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;phone:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required:true,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxlength:11,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxlength:11,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isphoneNum:true\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messages:&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account:&nbsp;&quot;请输入账号&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nickname:&nbsp;&quot;请输入昵称&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password:&nbsp;&quot;请输入密码&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passwords:{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required:&#39;请重复输入密码&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equalTo:&#39;两次密码输入不一致&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email:&#39;请输入邮箱&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;phone:{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required:&#39;请输入手机号&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxlength:&quot;请填写11位的手机号&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minlength:&quot;请填写11位的手机号&quot;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isphoneNum:&quot;请填写正确的手机号码&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;});\r\n});</pre><p><br/></p>', 'Validate,前端验证,Ajax', '胡鹏成的个人博客', '胡鹏成', 1537164075, NULL, 1, '/uploads/20180917/96c57e3e34e64d03cc1fcfc8ea482f74.jpg', 69);
INSERT INTO `think_article` VALUES (12, 9, '批处理.bat修改host文件', '批处理(Batch)，也称为批处理脚本。顾名思义，批处理就是对某对象进行批量的处理，通常被认为是一种简化的脚本语言，它应用于DOS和Windows系统中。', '<pre class=\"brush:bash;toolbar:false\">cd&nbsp;/d&nbsp;%windir%\\system32\\drivers\\etc&nbsp;&nbsp;\r\nfor&nbsp;/f&nbsp;&quot;eol=#&nbsp;tokens=1,2&quot;&nbsp;%%i&nbsp;in&nbsp;(hosts.bak)&nbsp;do&nbsp;call&nbsp;:checkvalue&nbsp;%%i&nbsp;%%j&nbsp;\r\ngoto&nbsp;end&nbsp;\r\n:checkvalue&nbsp;\r\nif&nbsp;%errorlevel%==1&nbsp;(echo&nbsp;%1&nbsp;%2&nbsp;&gt;&gt;hosts)&nbsp;\r\n:end&nbsp;\r\n\r\ntype&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;www.szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;bbs.szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;cost.szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;pp.szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;yh.szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;club.szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;shop.szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;images.szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;files.szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts&nbsp;\r\necho&nbsp;192.168.2.188&nbsp;ajax.szshequ.com&nbsp;&gt;&gt;&nbsp;C:\\WINDOWS\\system32\\drivers\\etc\\hosts</pre><p><br/></p>', '批处理,修改host', '胡鹏成的个人博客', '胡鹏成', 1537341031, NULL, 1, '/uploads/20180919/34055656ed3fe194c6a395776861188d.jpg', 96);
INSERT INTO `think_article` VALUES (13, 6, 'tp5 session 验证登录超时设置', 'PHP设置会话(Session)超时过期时间实现登录时间限制', '<h4>先在所继承的父类中加以下代码：</h4><p><br/></p><pre class=\"brush:php;toolbar:false\">if&nbsp;((session(&#39;last_time&#39;)&nbsp;-&nbsp;time())&nbsp;&lt;=&nbsp;0)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;session_destroy();//真正的销毁在这里！\r\n&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;error(&#39;登录验证超时，请重新登录&#39;,&nbsp;&#39;admin/login/index&#39;);\r\n}</pre><p><br/></p><p>然后登录成功后的代码处加入以下代码<br/></p><p><br/></p><pre class=\"brush:php;toolbar:false\">session(&#39;last_time&#39;,time()+3600);</pre><p><br/></p>', '登录超时, 验证登录', '胡鹏成的个人博客', '胡鹏成', 1538100070, NULL, 1, '/uploads/20180928/f239fafdd2d42694c753b0e3dd02bfd2.jpg', 152);
INSERT INTO `think_article` VALUES (14, 6, 'PHP Curl库实现数据爬取', '这篇文章主要介绍了PHP中使用CURL之php curl详细解析', '<h4><span style=\"font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;\">由于最近工作需要爬取一个网站的工控漏洞库，本人呢又不会python就只好用PHP来写了一套，查了很多资料写出了一个勉强能用的爬虫，在这贴出源代码用于交流，在爬取过程中刚开始是一次性爬取所有大概2000条，速度实在太慢了我实在等不及就用AJAX每次爬取一页的内容，这样如果中间出现什么问题，也可以快速查找断点解决问题，还发现有个坑就是爬取中会无故的自动停止，也没有找到问题的所在，因为每次中断的位置都不同，所以我怀疑和网速可能也有关系，下面贴出来源代码给大家，一部分是用TP5写的，一部分是刚开始用来测试原生写的。</span></h4><p><br/></p><h4>后台（TP5）<br/></h4><p><br/></p><pre class=\"brush:php;toolbar:false\">&lt;?php\r\nnamespace&nbsp;app\\index\\controller;\r\nuse&nbsp;think\\Db;\r\nuse&nbsp;think\\Controller;\r\n\r\nini_set(&#39;max_execution_time&#39;,&nbsp;&#39;5000&#39;);&nbsp;&nbsp;//设置超时时间\r\n\r\nclass&nbsp;Curl&nbsp;extends&nbsp;Controller\r\n{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;index()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;view(&#39;index&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;爬取页面全部数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;curlGetData($url)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//初始化一个&nbsp;cURL&nbsp;对象\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ch&nbsp;=&nbsp;curl_init();&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;设置你需要抓取的URL\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($ch,&nbsp;CURLOPT_URL,&nbsp;$url);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;设置header\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt&nbsp;($ch,&nbsp;&nbsp;CURLOPT_HEADER,&nbsp;&nbsp;false);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($ch,&nbsp;CURLOPT_SSL_VERIFYPEER,&nbsp;false);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($ch,&nbsp;CURLOPT_SSL_VERIFYHOST,&nbsp;false);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($ch,&nbsp;CURLOPT_RETURNTRANSFER,&nbsp;1);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;执行一个curl会话\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response&nbsp;=&nbsp;curl_exec($ch);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;如果爬取失败那就再来一次\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!$response){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self::curlGetData($url);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$response;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;关闭一个curl会话\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_close($ch);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;//爬取url\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getNewsInfo($num)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;准备一个空数组盛放url\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$link&nbsp;=&nbsp;[];\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;拼接每一页的url\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$url&nbsp;=&nbsp;&quot;http://ivd.winicssec.com/index.php/Home/Index/index/p/{$num}.html&quot;;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;抓取当前页面的所有信息\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;curlGetData($url);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;准备一个空数组盛放当前页面抓取到的所有url\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;[];\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;正则匹配抓取当前页面的url\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;td&nbsp;class=&quot;&quot;&nbsp;style=&quot;&quot;&gt;([\\s\\S]*?)&lt;\\/td&gt;/&#39;,&nbsp;$result,&nbsp;$data);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;str_replace(&#39;&lt;span&nbsp;class=&quot;grey&quot;&gt;&#39;,&nbsp;&#39;&#39;,&nbsp;$data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;str_replace(&#39;&lt;/span&gt;&#39;,&nbsp;&#39;&#39;,&nbsp;$data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;$data[0];\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;正则匹配href\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($data&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pat&nbsp;=&#39;/&lt;a(.*?)href=&quot;(.*?)&quot;(.*?)&gt;(.*?)&lt;\\/a&gt;/i&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all($pat,&nbsp;$value,&nbsp;$m);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$link[]&nbsp;=&nbsp;&nbsp;$m[2];&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$link;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;正则匹配href\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getUrl($value)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pat&nbsp;=&#39;/&lt;a(.*?)href=&quot;(.*?)&quot;(.*?)&gt;(.*?)&lt;\\/a&gt;/i&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all($pat,&nbsp;$value,&nbsp;$m);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$m[2][0];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;//获取所有数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getData($num)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;爬取url\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$link&nbsp;=&nbsp;$this-&gt;getNewsInfo($num);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;准备一个数组用来盛放最后爬取到的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end&nbsp;=&nbsp;[];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($link&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//拼接url\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$url&nbsp;=&nbsp;&quot;http://ivd.winicssec.com&quot;&nbsp;.&nbsp;&nbsp;$value[0];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//循环获取每个页面的所有数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;curlGetData($url);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//正则匹配获取需要的数据\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;span&nbsp;class=&quot;grey&quot;&gt;([\\s\\S]*?)+&lt;\\/span&gt;([\\s\\S]*?)&lt;\\/p&gt;/&#39;,&nbsp;$result,&nbsp;$data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;h1&gt;([\\s\\S]*?)&lt;\\/h1&gt;/&#39;,&nbsp;$result,&nbsp;$title);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;div&nbsp;class=&quot;panel-body&quot;&gt;([\\s\\S]*?)&lt;\\/div&gt;/&#39;,&nbsp;$result,&nbsp;$product);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;span&nbsp;class=&quot;label&nbsp;label-info&quot;&gt;([\\s\\S]*?)&lt;\\/span&gt;/&#39;,&nbsp;$result,&nbsp;$cvss);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;p&nbsp;class=&quot;col-md-4&nbsp;grey&quot;&nbsp;style=&quot;overflow:hidden;&nbsp;text-overflow:ellipsis;&nbsp;white-space:&nbsp;nowrap;&quot;&nbsp;title=&quot;([\\s\\S]*?)&quot;&gt;([\\s\\S]*?)&lt;\\/p&gt;/&#39;,&nbsp;$result,&nbsp;$cc);//受影响的平台和产品\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[]&nbsp;=&nbsp;$data[2];&nbsp;&nbsp;//漏洞参数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isset($title[1][0])&nbsp;?&nbsp;$end[$key][6]&nbsp;=&nbsp;$title[1][0]&nbsp;:&nbsp;$end[$key][6]&nbsp;=&nbsp;&#39;&#39;;&nbsp;&nbsp;&nbsp;//漏洞名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][7]&nbsp;=&nbsp;&quot;http://ivd.winicssec.com&quot;&nbsp;.&nbsp;&nbsp;$value[0];&nbsp;&nbsp;&nbsp;&nbsp;//url\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty($cc[1])&nbsp;?&nbsp;$end[$key][8]&nbsp;=&nbsp;[]&nbsp;:&nbsp;$end[$key][8]&nbsp;=&nbsp;$cc[1];&nbsp;&nbsp;&nbsp;//受影响的平台和产品\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][9]&nbsp;=&nbsp;preg_replace(&quot;/(\\s|\\&amp;nbsp\\;|　|\\xc2\\xa0)/&quot;,&quot;&quot;,$product[0][1]);&nbsp;&nbsp;&nbsp;//漏洞描述\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][10]&nbsp;=&nbsp;preg_replace(&quot;/(\\s|\\&amp;nbsp\\;|　|\\xc2\\xa0)/&quot;,&quot;&quot;,$product[0][2]);&nbsp;&nbsp;//安全建议&amp;解决方案\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][11]&nbsp;=&nbsp;str_replace(&#39;CVSS评分:&#39;,&#39;&#39;,preg_replace(&quot;/(\\s|\\&amp;nbsp\\;|　|\\xc2\\xa0)/&quot;,&quot;&quot;,$cvss[0][0]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;去除空格关联数组操作\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array&nbsp;=&nbsp;[];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($end&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($value&nbsp;as&nbsp;$k&nbsp;=&gt;&nbsp;$v)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;title&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][6]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;type&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][0]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;level&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][1]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;cve&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][2]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;cnvd&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][3]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;cnnd&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][4]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;time&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][5]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;url&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][7]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;description&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][9]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;suggest&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][10]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;cvss&#39;]&nbsp;=&nbsp;strip_tags(trim($end[$key][11]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;product&#39;]&nbsp;=&nbsp;json_encode($end[$key][8]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;product_s&#39;]&nbsp;=&nbsp;implode(&#39;&lt;br/&gt;&#39;,$end[$key][8]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;cve_url&#39;]&nbsp;=&nbsp;$this-&gt;getUrl($end[$key][2]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;cnvd_url&#39;]&nbsp;=&nbsp;$this-&gt;getUrl($end[$key][3]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key][&#39;cnnd_url&#39;]&nbsp;=&nbsp;$this-&gt;getUrl($end[$key][4]);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset($end);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$array;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;写入数据库\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;setLoophole($num)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;$this-&gt;getData($num);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;db(&#39;data&#39;)-&gt;insertAll($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($result)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&#39;code&#39;=&gt;1,&#39;num&#39;=&gt;$num];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&#39;code&#39;=&gt;2];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n}</pre><p><br/></p><h4><br/></h4><h4>前台<br/></h4><p><br/></p><pre class=\"brush:html;toolbar:false\">&lt;!DOCTYPE&nbsp;html&gt;\r\n&lt;html&gt;\r\n\r\n&lt;head&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=&quot;utf-8&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=&quot;viewport&quot;&nbsp;content=&quot;width=device-width,&nbsp;initial-scale=1.0&quot;&gt;\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;button&nbsp;onclick=&quot;setData()&quot;&gt;爬取&lt;/button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;font-size:15px;text-align:&nbsp;center;&quot;&nbsp;class=&quot;show&quot;&gt;&lt;/div&gt;\r\n\r\n&lt;/body&gt;\r\n&lt;script&nbsp;src=&quot;__ADMIN__/js/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n&lt;script&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;setData(num&nbsp;=&nbsp;1)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$.ajax({&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&#39;POST&#39;,&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataType:&quot;json&quot;,&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&quot;{:url(&#39;index/curl/setLoophole&#39;)}?num=&quot;+num,&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success:function(obj){&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(obj.code&nbsp;==&nbsp;1){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(&#39;.show&#39;).append(&quot;&lt;br&gt;&lt;b&gt;恭喜您！第&quot;+obj.num+&quot;页数据爬取成功&nbsp;o(*￣︶￣*)o&lt;/b&gt;&quot;);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//只有196页数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(obj.num&nbsp;==&nbsp;196)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(&#39;.show&#39;).append(&quot;&lt;br&gt;&lt;b&gt;o(╥﹏╥)o&lt;/b&gt;爬取上限了&nbsp;o(╥﹏╥)o&lt;/b&gt;&lt;/b&gt;&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//爬取成功+1开始爬取第二页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;num+1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setData(num);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setData(num);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(&#39;.show&#39;).append(&quot;&lt;br&gt;&lt;b&gt;警告！爬取失败&nbsp;o(╥﹏╥)o&lt;/b&gt;，已重新开始&quot;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&lt;/script&gt;\r\n&lt;/html&gt;</pre><p><br/></p><h4>原生PHP（用于测试功能的底稿）</h4><p><br/></p><pre class=\"brush:php;toolbar:false\">&lt;?php\r\n//&nbsp;php最大执行时间设置为：半个小时，php原来默认为30秒，爬不完\r\nini_set(&#39;max_execution_time&#39;,&nbsp;&#39;1800&#39;);\r\n\r\n\r\n//&nbsp;爬取页面全部数据\r\nfunction&nbsp;curlGetData($url)\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;$ch&nbsp;=&nbsp;curl_init();\r\n&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($ch,&nbsp;CURLOPT_URL,&nbsp;$url);\r\n&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt&nbsp;($ch,&nbsp;&nbsp;CURLOPT_HEADER,&nbsp;&nbsp;false);\r\n&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($ch,&nbsp;CURLOPT_SSL_VERIFYPEER,&nbsp;false);\r\n&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($ch,&nbsp;CURLOPT_SSL_VERIFYHOST,&nbsp;false);\r\n&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($ch,&nbsp;CURLOPT_RETURNTRANSFER,&nbsp;1);\r\n&nbsp;&nbsp;&nbsp;&nbsp;$response&nbsp;=&nbsp;curl_exec($ch);\r\n&nbsp;&nbsp;&nbsp;&nbsp;curl_close($ch);\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;$response&nbsp;=&nbsp;str_replace(&#39;gb2312&#39;,&#39;utf-8&#39;,$response);\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;$response&nbsp;=&nbsp;&nbsp;iconv(&quot;gb2312&quot;,&quot;utf-8//IGNORE&quot;,$response);\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$response;\r\n}\r\n\r\n//爬取和url\r\nfunction&nbsp;getNewsInfo()\r\n{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;$link&nbsp;=&nbsp;[];\r\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i&nbsp;=&nbsp;0;&nbsp;$i&nbsp;&lt;&nbsp;2&nbsp;;&nbsp;$i++)&nbsp;{&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$url&nbsp;=&nbsp;&quot;http://ivd.winicssec.com/index.php/Home/Index/index/p/{$i}.html&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;curlGetData($url);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;[];\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;td&nbsp;class=&quot;&quot;&nbsp;style=&quot;&quot;&gt;([\\s\\S]*?)&lt;\\/td&gt;/&#39;,&nbsp;$result,&nbsp;$data);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;str_replace(&#39;&lt;span&nbsp;class=&quot;grey&quot;&gt;&#39;,&nbsp;&#39;&#39;,&nbsp;$data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;str_replace(&#39;&lt;/span&gt;&#39;,&nbsp;&#39;&#39;,&nbsp;$data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;$data[0];\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($data&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pat&nbsp;=&#39;/&lt;a(.*?)href=&quot;(.*?)&quot;(.*?)&gt;(.*?)&lt;\\/a&gt;/i&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all($pat,&nbsp;$value,&nbsp;$m);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//正则匹配href\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$link[]&nbsp;=&nbsp;&nbsp;$m[2];&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$link;\r\n\r\n\r\n}\r\n\r\n//获取所有数据\r\nfunction&nbsp;getData()\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;$link&nbsp;=&nbsp;getNewsInfo();\r\n&nbsp;&nbsp;&nbsp;&nbsp;$end&nbsp;=&nbsp;[];\r\n&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($link&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//拼接url\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$url&nbsp;=&nbsp;&quot;http://ivd.winicssec.com&quot;&nbsp;.&nbsp;&nbsp;$value[0];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//循环获取每个页面的所有数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;curlGetData($url);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;[];\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//正则匹配获取需要的数据\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;span&nbsp;class=&quot;grey&quot;&gt;([\\s\\S]*?)+&lt;\\/span&gt;([\\s\\S]*?)&lt;\\/p&gt;/&#39;,&nbsp;$result,&nbsp;$data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;h1&gt;([\\s\\S]*?)&lt;\\/h1&gt;/&#39;,&nbsp;$result,&nbsp;$title);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;div&nbsp;class=&quot;panel-body&quot;&gt;([\\s\\S]*?)&lt;\\/div&gt;/&#39;,&nbsp;$result,&nbsp;$product);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;span&nbsp;class=&quot;label&nbsp;label-info&quot;&gt;([\\s\\S]*?)&lt;\\/span&gt;/&#39;,&nbsp;$result,&nbsp;$cvss);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match_all&nbsp;(&#39;/&lt;p&nbsp;class=&quot;col-md-4&nbsp;grey&quot;&nbsp;style=&quot;overflow:hidden;&nbsp;text-overflow:ellipsis;&nbsp;white-space:&nbsp;nowrap;&quot;&nbsp;title=&quot;([\\s\\S]*?)&quot;&gt;([\\s\\S]*?)&lt;\\/p&gt;/&#39;,&nbsp;$result,&nbsp;$cc);//受影响的平台和产品\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[]&nbsp;=&nbsp;$data[2];&nbsp;&nbsp;//漏洞参数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][6]&nbsp;=&nbsp;$title[1][0];&nbsp;&nbsp;&nbsp;//漏洞名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][7]&nbsp;=&nbsp;&quot;http://ivd.winicssec.com&quot;&nbsp;.&nbsp;&nbsp;$value[0];&nbsp;&nbsp;&nbsp;&nbsp;//url\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][8]&nbsp;=&nbsp;$cc[1];&nbsp;&nbsp;&nbsp;//受影响的平台和产品\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][9]&nbsp;=&nbsp;preg_replace(&quot;/(\\s|\\&amp;nbsp\\;|　|\\xc2\\xa0)/&quot;,&quot;&quot;,$product[0][1]);&nbsp;&nbsp;&nbsp;//漏洞描述\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][10]&nbsp;=&nbsp;preg_replace(&quot;/(\\s|\\&amp;nbsp\\;|　|\\xc2\\xa0)/&quot;,&quot;&quot;,$product[0][2]);&nbsp;&nbsp;//安全建议&amp;解决方案\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][11]&nbsp;=&nbsp;str_replace(&#39;CVSS评分:&#39;,&#39;&#39;,preg_replace(&quot;/(\\s|\\&amp;nbsp\\;|　|\\xc2\\xa0)/&quot;,&quot;&quot;,$cvss[0][0]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$end;\r\n\r\n}\r\n\r\n$end&nbsp;=&nbsp;getData();\r\n\r\n//去除空格操作\r\nforeach&nbsp;($end&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($value&nbsp;as&nbsp;$k&nbsp;=&gt;&nbsp;$v)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($k&nbsp;!=&nbsp;8){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][$k]&nbsp;=&nbsp;strip_tags(trim($v));&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($v&nbsp;as&nbsp;$ks&nbsp;=&gt;&nbsp;$vs)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$end[$key][$k][$ks]&nbsp;=&nbsp;strip_tags(trim($vs));&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}\r\n\r\necho&nbsp;&#39;&lt;pre&gt;&#39;;\r\nvar_dump($end);</pre><p><br/></p>', 'php爬虫,php爬取数据,phpCurl,', '胡鹏成的个人博客', '胡鹏成', 1539221476, NULL, 1, '/uploads/20181009/5fcce3a84802342e4cf6a3cf8c98e5ed.jpg', 157);
INSERT INTO `think_article` VALUES (16, 4, 'Echarts 文字太长显示不全解决方案——换行显示', 'ECharts，一个使用 JavaScript 实现的开源可视化库，可以流畅的运行在 PC 和移动设备上，兼容当前绝大部分浏览器（IE8/9/10/11，Chrome，Firefox，Safari等），底层依赖轻量级的矢量图形库 ZRender，提供直观，交互丰富，可高度个性化定制的数据可视化图表。', '<h4>引入js文件<br></h4><p><br></p><pre><code class=\"lang-js\">&lt;script&nbsp;src=\"echarts.min.js\"&gt;&lt;/script&gt;</code></pre><p><br></p><h4>js代码部分</h4><pre><code class=\"lang--1\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;基于准备好的dom，初始化echarts实例\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;myChart&nbsp;=&nbsp;echarts.init(document.getElementById(\'main\'));\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;指定图表的配置项和数据\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;backgroundColor:\'#FFFFFF\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:&nbsp;[\"#1ab394\"],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//text:&nbsp;\'XX区域的获证企业数\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subtext:&nbsp;\'\'\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tooltip:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;\'axis\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;axisPointer:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;\'shadow\'\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;toolbox:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show:&nbsp;true,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;feature:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mark:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show:&nbsp;true\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;legend:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[\'系统数量\'],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left:\'17%\'\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grid:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left:&nbsp;\'3%\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;right:&nbsp;\'4%\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bottom:&nbsp;\'3%\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;containLabel:&nbsp;true\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xAxis:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;\'value\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boundaryGap:&nbsp;[0,&nbsp;0.01]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yAxis:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;\'category\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;{$unit_name},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;axisLabel&nbsp;:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interval&nbsp;:&nbsp;0,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//解决方案开始\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;formatter&nbsp;:&nbsp;function(params){\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;newParamsName&nbsp;=&nbsp;\"\";\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;paramsNameNumber&nbsp;=&nbsp;params.length;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;provideNumber&nbsp;=&nbsp;8;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rowNumber&nbsp;=&nbsp;Math.ceil(paramsNameNumber&nbsp;/&nbsp;provideNumber);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(paramsNameNumber&nbsp;&gt;&nbsp;provideNumber)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(var&nbsp;p&nbsp;=&nbsp;0;&nbsp;p&nbsp;&lt;&nbsp;rowNumber;&nbsp;p++)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tempStr&nbsp;=&nbsp;\"\";\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;start&nbsp;=&nbsp;p&nbsp;*&nbsp;provideNumber;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;end&nbsp;=&nbsp;start&nbsp;+&nbsp;provideNumber;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(p&nbsp;==&nbsp;rowNumber&nbsp;-&nbsp;1)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tempStr&nbsp;=&nbsp;params.substring(start,&nbsp;paramsNameNumber);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tempStr&nbsp;=&nbsp;params.substring(start,&nbsp;end)&nbsp;+&nbsp;\"\\n\";\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newParamsName&nbsp;+=&nbsp;tempStr;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newParamsName&nbsp;=&nbsp;params;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;newParamsName\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//结束\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;series:&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;\'系统数量\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;\'bar\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//color:\'#6666cc\',\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;{$unit_value}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;使用刚指定的配置项和数据显示图表。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myChart.setOption(option);<br></code></pre><p><br></p><p><br></p><p>HTML部分只需要创建一个id为main的div即可</p>', 'EChart', '胡鹏成的个人博客', '胡鹏成', 1557544468, NULL, 1, '/uploads/20181018/7a18eef9dcc4867d4d4eed3c5ed23a98.jpg', 82);
INSERT INTO `think_article` VALUES (17, 11, 'Mysql中不清除表里的数据重新设置自增的id的方法', '​设置主键id自增的数据库表删除数据后，自增id不会自动重新计算  想要重新设置自增的id可以用如下命令', '<p><span style=\"color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">设置主键id自增的数据库表删除数据后，自增id不会自动重新计算&nbsp;</span><br/><span style=\"color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\">想要重新设置自增的id可以用如下命令</span></p><p><span style=\"color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\"><br/></span></p><p><span style=\"color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\"><br/></span></p><pre class=\"brush:sql;toolbar:false\">alter&nbsp;table&nbsp;table_name&nbsp;AUTO_INCREMENT=10;</pre><p><span style=\"color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\"></span><br/></p><p><span style=\"color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; background-color: rgb(255, 255, 255);\"><br/></span></p>', '重置mysqlid', '胡鹏成的个人博客', '胡鹏成', 1540880904, NULL, 1, '/uploads/20181030/7169be1f2e8d12cee3e3b25c10473ad0.jpg', 60);
INSERT INTO `think_article` VALUES (18, 6, 'TP5.0和TP5.1静态资源配置方法', 'TP框架js、css、image等静态文件的配置和使用方法', '<h4>5.0 配置文件config.php配置参数view_replace_str</h4><p><br/></p><pre class=\"brush:php;toolbar:false\">//&nbsp;视图输出字符串内容替换\r\n&#39;view_replace_str&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&#39;__ROOT__&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&nbsp;&#39;&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&#39;__PUBLIC__&#39;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&nbsp;&#39;/public&#39;,\r\n],</pre><h4>5.1配置文件template配置参数tpl_replace_strin</h4><p><br/></p><pre class=\"brush:php;toolbar:false\">//&nbsp;视图输出字符串内容替换\r\n&#39;tpl_replace_string&#39;&nbsp;=&gt;&nbsp;[\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;__ADMIN__&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&nbsp;&#39;/static/admin&#39;,\r\n],</pre><p><br/></p>', 'TP5,静态资源文件配置', '胡鹏成的个人博客', '胡鹏成', 1542873387, NULL, 1, '/uploads/20181122/4816da5edff896ec098f8b46b1d7f9f7.jpg', 95);
INSERT INTO `think_article` VALUES (21, 6, '引用方式实现无限级分类', '引用方式实现无限级分类', '<pre class=\"brush:php;toolbar:false\">&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;获取规则列表-优化-引用方式\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;&nbsp;[arr]&nbsp;&nbsp;$data&nbsp;&nbsp;[包含所有栏目分类的数组]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;&nbsp;integer&nbsp;$pid&nbsp;&nbsp;&nbsp;[上级规则标识]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;&nbsp;integer&nbsp;$level&nbsp;[规则层级]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[arr]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getAuth($data,&nbsp;&amp;$arr&nbsp;=&nbsp;[],&nbsp;$pid&nbsp;=&nbsp;0,&nbsp;$level&nbsp;=&nbsp;-1)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//初始层级为0每次递归查询+1\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$level&nbsp;+=&nbsp;1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//层级为0则不需要加|\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$level&nbsp;?&nbsp;$str&nbsp;=&nbsp;&#39;|&#39;&nbsp;:&nbsp;$str&nbsp;=&nbsp;&#39;&#39;;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($data&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//取出当前层级下的所有子集\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($pid&nbsp;==&nbsp;$value[&#39;pid&#39;])&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tmp_arr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;array();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tmp_arr[&#39;id&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;$value[&#39;id&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tmp_arr[&#39;name&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;$str&nbsp;.&nbsp;str_repeat(&#39;--&#39;,&nbsp;$level)&nbsp;.&nbsp;$value[&#39;name&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tmp_arr[&#39;pid&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;$value[&#39;pid&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tmp_arr[&#39;permission&#39;]&nbsp;=&nbsp;$value[&#39;permission&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tmp_arr[&#39;status&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;$value[&#39;status&#39;];\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr[]&nbsp;=&nbsp;$tmp_arr;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self::getauth($data,&nbsp;$arr,&nbsp;$value[&#39;id&#39;],&nbsp;$level);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset($value);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//因为$arr是引用变量每次都指向同一内存的数组所以不需要return\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p><br/></p>', '无限级分类', '胡鹏成的个人博客', '胡鹏成', 1543291383, NULL, 1, '/uploads/20181127/6d48e5bb34c67fb0a620af260e9adb3b.jpg', 90);
INSERT INTO `think_article` VALUES (22, 6, 'TP框架事务处理使用方法（模型、模型静态方法、db类方法）', 'TP框架（5.1）事务处理使用方法（模型、模型静态方法、db类方法）', '<h4>db类事务处理</h4><p><br/></p><pre class=\"brush:php;toolbar:false\">//&nbsp;启动事务Db::startTrans();\r\ntry&nbsp;{\r\nDb::table(&#39;think_user&#39;)-&gt;find(1);\r\nDb::table(&#39;think_user&#39;)-&gt;delete(1);\r\n//&nbsp;提交事务\r\nDb::commit();}&nbsp;catch&nbsp;(\\Exception&nbsp;$e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;回滚事务\r\n&nbsp;&nbsp;&nbsp;&nbsp;Db::rollback();\r\n}</pre><p><br/></p><p><br/></p><h4>模型事务处理</h4><p><br/></p><pre class=\"brush:php;toolbar:false\">$user&nbsp;=&nbsp;UserModel::get($id);\r\n$ur&nbsp;&nbsp;&nbsp;=&nbsp;new&nbsp;UrModel;\r\n//开启事务\r\n$user-&gt;startTrans();\r\n$ur-&gt;startTrans();\r\ntry&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;$user-&gt;save($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;$ur-&gt;save([&#39;role_id&#39;&nbsp;=&gt;&nbsp;$role],&nbsp;[&#39;user_id&#39;&nbsp;=&gt;&nbsp;$id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;提交事务\r\n&nbsp;&nbsp;&nbsp;&nbsp;$user-&gt;commit();\r\n&nbsp;&nbsp;&nbsp;&nbsp;$ur-&gt;commit();\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&#39;code&#39;&nbsp;=&gt;&nbsp;&#39;1&#39;,&nbsp;&#39;msg&#39;&nbsp;=&gt;&nbsp;&#39;编辑成功&#39;];\r\n}&nbsp;catch&nbsp;(\\Exception&nbsp;$e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;回滚事务\r\n&nbsp;&nbsp;&nbsp;&nbsp;$user-&gt;rollback();\r\n&nbsp;&nbsp;&nbsp;&nbsp;$ur-&gt;rollback();\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&#39;code&#39;&nbsp;=&gt;&nbsp;&#39;1&#39;,&nbsp;&#39;msg&#39;&nbsp;=&gt;&nbsp;&#39;编辑失败&#39;];\r\n}</pre><p><br/></p><p><br/></p><h4>模型静态方法事务处理</h4><p><br/></p><pre class=\"brush:php;toolbar:false\">//开启事务\r\nUserModel::startTrans();\r\nUrModel::startTrans();\r\ntry&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;UserModel::destroy($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;UrModel::destroy([&#39;user_id&#39;&nbsp;=&gt;&nbsp;$id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;提交事务\r\n&nbsp;&nbsp;&nbsp;&nbsp;UserModel::commit();\r\n&nbsp;&nbsp;&nbsp;&nbsp;UrModel::commit();\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&#39;code&#39;&nbsp;=&gt;&nbsp;&#39;1&#39;,&nbsp;&#39;msg&#39;&nbsp;=&gt;&nbsp;&#39;删除成功&#39;];\r\n}&nbsp;catch&nbsp;(\\Exception&nbsp;$e)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;回滚事务\r\n&nbsp;&nbsp;&nbsp;&nbsp;UrModel::rollback();\r\n&nbsp;&nbsp;&nbsp;&nbsp;UrModel::rollback();\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&#39;code&#39;&nbsp;=&gt;&nbsp;&#39;1&#39;,&nbsp;&#39;msg&#39;&nbsp;=&gt;&nbsp;&#39;删除失败&#39;];\r\n}</pre><p><br/></p>', '事务处理', '胡鹏成的个人博客', '胡鹏成', 1543389963, NULL, 1, '/uploads/20181128/b7c4308dc017aac06e8601c462514eb9.jpg', 70);
INSERT INTO `think_article` VALUES (23, 6, 'TP5多条件模糊查询以及多条件查询带分页如何保留参数', 'TP5多条件模糊查询以及多条件查询带分页如何保留参数', '<p><strong>条件查询：</strong></p><p><strong><br/></strong></p><p>等于：map[&#39;id&#39;]=array(&#39;eq&#39;,100);</p><p>不等于：map[&#39;id&#39;] = array(&#39;neq&#39;,100);&nbsp;</p><p>大于 ：map[&#39;id&#39;]=array(&#39;gt&#39;,100);</p><p>大于等于：map[&#39;id&#39;]=array(&#39;egt&#39;,100);&nbsp;</p><p>小于：map[&#39;id&#39;]=array(&#39;lt&#39;,100);</p><p>小于等于：map[&#39;id&#39;]=array(&#39;elt&#39;,100);&nbsp;</p><p><br/></p><p><strong>模糊查询：</strong></p><p><strong><br/></strong></p><p>map[&#39;name&#39;]=array(&#39;like&#39;,&#39;thinkphpbetween:map[&#39;id&#39;]=array(&#39;between&#39;,&#39;1,8&#39;);&nbsp;</p><p>map[&#39;id&#39;]=array(&#39;between&#39;,array(&#39;1&#39;,&#39;8&#39;）)；</p><p>in:map[&#39;id&#39;]=array(&#39;id&#39;,&#39;1,2,3&#39;);&nbsp;</p><p>map[&#39;id&#39;]=array(&#39;notin&#39;,&#39;1,2,3&#39;);data=db(&#39;user&#39;)-&gt;where($map)-&gt;select();</p><p><br/></p><p><strong>多条件或查询&nbsp;</strong></p><p><strong><br/></strong></p><p>例如 select * from tbl where a like &#39;%123%&#39; or b like &#39;%123%&#39; or c like &#39;%123%&#39; ;&nbsp;</p><p>实现这样的功能,thinkphp怎么写呢？</p><p>where[&#39;a&#39;]=array(&#39;like&#39;,&#39;%123%&#39;);&nbsp;</p><p>where[&#39;b&#39;]=array(&#39;like&#39;,&#39;%123%&#39;);&nbsp;</p><p>where[&#39;c&#39;]=array(&#39;like&#39;,&#39;%123%&#39;);</p><p>答案 :where[&#39;a|b|c&#39;]=array(&#39;like&#39;,&#39;%123%&#39;);</p><p><br/></p><p><strong>多条件分页查询保留参数&nbsp;</strong></p><p><strong><br/></strong></p><p>Db::name(&#39;table&#39;)-&gt;where(&#39;XXXX&#39;)-&gt;paginate(10,false,[&#39;query&#39;=&gt;request()-&gt;param()]);&nbsp;</p><p>paginate方法的第三个参数</p><p><br/></p>', 'TP5模糊查询', '胡鹏成的个人博客', '胡鹏成', 1545290532, NULL, 1, '/uploads/20181220/620bd23f5d7cd216d57ce4f2678330b2.jpg', 77);
INSERT INTO `think_article` VALUES (26, 6, '关于ThinkPHP框架在开发过程中用到的一些操作（长期更新）', '关于ThinkPHP框架在开发过程中用到的一些操作，方便以后快速查找使用。', '<p><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">需要获取自增</span><code style=\"box-sizing: inherit; -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; text-size-adjust: none; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; background: rgb(249, 250, 250); border-radius: 4px; display: inline-block; line-height: 1.3; margin: 0px 5px; padding: 2px 6px; white-space: pre; word-break: break-all; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">id</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">的值，可以在</span><code style=\"box-sizing: inherit; -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; text-size-adjust: none; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; background: rgb(249, 250, 250); border-radius: 4px; display: inline-block; line-height: 1.3; margin: 0px 5px; padding: 2px 6px; white-space: pre; word-break: break-all; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">insert</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">方法之后紧接着调用</span><code style=\"box-sizing: inherit; -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; text-size-adjust: none; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; background: rgb(249, 250, 250); border-radius: 4px; display: inline-block; line-height: 1.3; margin: 0px 5px; padding: 2px 6px; white-space: pre; word-break: break-all; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">getLastInsID</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">方法：</span></p><pre class=\"brush:php;toolbar:false\">//&nbsp;插入单个记录Db::table(&#39;data&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;-&gt;insert([&#39;name&#39;&nbsp;=&gt;&nbsp;&#39;kancloud&#39;]);\r\n//&nbsp;获取上次写入的自增Id$id&nbsp;=&nbsp;Db::getLastInsID();</pre><p><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\"></span><br/></p><p><span style=\"color: rgb(217, 83, 79); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(253, 247, 247);\">由于PDO内部的原因，</span><code style=\"box-sizing: inherit; -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; text-size-adjust: none; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; background: rgb(249, 250, 250); border-radius: 4px; display: inline-block; line-height: 1.3; margin: 0px 5px; padding: 2px 6px; white-space: pre; word-break: break-all; border: 1px solid rgb(222, 217, 217); color: rgb(217, 83, 79);\">insertAll</code><span style=\"color: rgb(217, 83, 79); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(253, 247, 247);\">方法后调用</span><code style=\"box-sizing: inherit; -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; text-size-adjust: none; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; background: rgb(249, 250, 250); border-radius: 4px; display: inline-block; line-height: 1.3; margin: 0px 5px; padding: 2px 6px; white-space: pre; word-break: break-all; border: 1px solid rgb(222, 217, 217); color: rgb(217, 83, 79);\">getLastInsID</code><span style=\"color: rgb(217, 83, 79); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(253, 247, 247);\">方法返回的自增Id可能存在偏差。<span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">或者直接合并上面的代码为：<br/></span></span></p><pre class=\"brush:php;toolbar:false\">//&nbsp;插入单个记录&nbsp;并返回自增Id$id&nbsp;=&nbsp;Db::table(&#39;data&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;-&gt;insertGetId([&#39;name&#39;&nbsp;=&gt;&nbsp;&#39;kancloud&#39;]);</pre><p><span style=\"color: rgb(217, 83, 79); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(253, 247, 247);\"></span><br/></p><p><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">在任何查询中可以使用</span><code style=\"box-sizing: inherit; -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; text-size-adjust: none; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; background: rgb(249, 250, 250); border-radius: 4px; display: inline-block; line-height: 1.3; margin: 0px 5px; padding: 2px 6px; white-space: pre; word-break: break-all; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">fetchSql</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">方法来获取查询的SQL而不是实际执行查询</span></p><pre class=\"brush:php;toolbar:false\">//&nbsp;不会进行实际的查询&nbsp;&nbsp;&nbsp;返回SQL字符串$result&nbsp;=&nbsp;Db::table(&#39;user&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;-&gt;fetchSql(true)\r\n&nbsp;&nbsp;&nbsp;&nbsp;-&gt;where(&#39;id&#39;,&nbsp;1)\r\n&nbsp;&nbsp;&nbsp;&nbsp;-&gt;find();echo&nbsp;$result;</pre><p><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\"></span><br/></p>', 'thinkphp', '胡鹏成的个人博客', '胡鹏成', 1545295854, NULL, 1, '/uploads/20181220/448a8ceef9529bee602b1d32f8aa8e5d.jpg', 97);
INSERT INTO `think_article` VALUES (27, 6, 'TP5手机号码格式验证', 'TP5手机号码格式正则验证', '<pre class=\"brush:php;toolbar:false\">&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$regex&nbsp;=&nbsp;[&#39;zip&#39;&nbsp;=&gt;&nbsp;&#39;/^1[34578]\\d{9}$/&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$rule&nbsp;&nbsp;=&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;student_phone&#39;&nbsp;&nbsp;=&gt;&nbsp;&#39;require|regex:zip&#39;,\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;];\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$message&nbsp;=&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;student_phone.require&#39;&nbsp;&nbsp;=&gt;&nbsp;&#39;学员联系电话必填&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;student_phone.regex&#39;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&#39;学员联系电话格式错误&#39;,\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;];</pre><p><br/></p>', 'TP5手机号验证,手机号正则验证', '胡鹏成的个人博客', '胡鹏成', 1551410699, NULL, 1, '/uploads/20190301/6d7c67e2c3c932f198b61ead0db75728.jpg', 12);
INSERT INTO `think_article` VALUES (28, 6, 'TP5如何修改入口文件', 'ThinkPHP5修改入口文件', '<p><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">ThinkPHP5.0</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">版本的默认自带的入口文件位于</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">public/index.php</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">（实际部署的时候</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">public</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">目录为你的应用对外访问目录），入口文件内容如下：<br/><br/><br/></span></p><pre class=\"brush:php;toolbar:false\">//&nbsp;定义应用目录define(&#39;APP_PATH&#39;,&nbsp;__DIR__&nbsp;.&nbsp;&#39;/../application/&#39;);\r\n//&nbsp;加载框架引导文件require&nbsp;__DIR__&nbsp;.&nbsp;&#39;/../thinkphp/start.php&#39;;</pre><p><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\"></span><br/></p><p><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">为了方便访问，我们设置</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">vhost</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">访问，以</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">apache</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">为例的话定义如下：</span></p><p><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\"><br/></span></p><pre class=\"brush:php;toolbar:false\">&lt;VirtualHost&nbsp;*:80&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;DocumentRoot&nbsp;&quot;/home/www/tp5/public&quot;\r\n&nbsp;&nbsp;&nbsp;&nbsp;ServerName&nbsp;tp5.com\r\n&lt;/VirtualHost&gt;</pre><p><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\"></span><br/></p><p><span style=\"color: rgb(91, 192, 222); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(244, 248, 250);\">把</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(91, 192, 222);\">DocumentRoot</code><span style=\"color: rgb(91, 192, 222); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(244, 248, 250);\">修改为你本机</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(91, 192, 222);\">tp5/public</code><span style=\"color: rgb(91, 192, 222); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(244, 248, 250);\">所在目录，并注意修改本机的</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(91, 192, 222);\">hosts</code><span style=\"color: rgb(91, 192, 222); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(244, 248, 250);\">文件把</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(91, 192, 222);\">tp5.com</code><span style=\"color: rgb(91, 192, 222); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(244, 248, 250);\">指向本地</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(91, 192, 222);\">127.0.0.1</code><span style=\"color: rgb(91, 192, 222); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(244, 248, 250);\">。</span></p><p><span style=\"color: rgb(91, 192, 222); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(244, 248, 250);\"><br/></span></p><p><span style=\"color: rgb(91, 192, 222); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(244, 248, 250);\"><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">如果你暂时不想设置</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">vhost</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">或者还不是特别了解如何设置，可以先把入口文件移动到框架的</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">ROOT_PATH</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">目录，并更改入口文件中的</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">APP_PATH</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">和框架入口文件的位置（这里顺便展示下如何更改相关目录名称），</span><code style=\"box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; display: inline-block; border-radius: 4px; padding: 2px 6px; background: rgb(249, 250, 250); word-break: break-all; white-space: pre; line-height: 1.3; margin: 0px 5px; border: 1px solid rgb(222, 217, 217); color: rgb(82, 82, 82);\">index.php</code><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\">文件内容如下：</span></span></p><p><span style=\"color: rgb(91, 192, 222); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(244, 248, 250);\"><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\"><br/></span></span></p><pre class=\"brush:php;toolbar:false\">//&nbsp;定义应用目录为appsdefine(&#39;APP_PATH&#39;,&nbsp;__DIR__&nbsp;.&nbsp;&#39;/apps/&#39;);\r\n//&nbsp;加载框架引导文件require&nbsp;__DIR__&nbsp;.&nbsp;&#39;/think/start.php&#39;;</pre><p><span style=\"color: rgb(91, 192, 222); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(244, 248, 250);\"><span style=\"color: rgb(82, 82, 82); font-family: &quot;Helvetica Neue&quot;, NotoSansHans-Regular, AvenirNext-Regular, arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, &quot;WenQuanYi Micro Hei&quot;, serif; font-size: 15px; background-color: rgb(255, 255, 255);\"></span></span><br/></p>', 'TP5,入口文件修改', '胡鹏成的个人博客', '胡鹏成', 1551750198, NULL, 1, '/uploads/20190305/bab39d37413da70684c1e5471b31483e.jpg', 6);
INSERT INTO `think_article` VALUES (30, 6, 'PHP实现邮件发送', 'PHP实现邮件发送', '<p><br>index.html</p><pre><code class=\"lang-html\">&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\n&lt;title&gt;PHP利用smtp类发送邮件范例&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;form action=\"sendmail.php\" method=\"post\"&gt;\n&nbsp; &nbsp; &lt;p&gt;收件人：&lt;input type=\"text\" name=\"toemail\" /&gt;&lt;/p&gt;\n&nbsp; &nbsp; &lt;p&gt;标&amp;nbsp;&amp;nbsp;题：&lt;input type=\"text\" name=\"title\" /&gt;&lt;/p&gt;\n&nbsp; &nbsp; &lt;p&gt;内&amp;nbsp;&amp;nbsp;容：&lt;textarea name=\"content\" cols=\"50\" rows=\"5\"&gt;&lt;/textarea&gt;&lt;/p&gt;\n&nbsp; &nbsp; &lt;p&gt;&lt;input type=\"submit\" value=\"发送\"&nbsp; /&gt;&lt;/p&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;<br></code></pre><p><span style=\"\">sendmail.php</span><br></p><pre><code class=\"lang-php\">&lt;?php\nrequire_once \"Smtp.class.php\";\n//******************** 配置信息 ********************************\n$smtpserver&nbsp; &nbsp; &nbsp;= \"ssl://smtp.163.com\"; //SMTP服务器\n$smtpserverport = 465; //SMTP服务器端口\n$smtpusermail&nbsp; &nbsp;= \"Hi_HuPengCheng@163.com\"; //SMTP服务器的用户邮箱\n$smtpemailto&nbsp; &nbsp; = $_POST[\'toemail\']; //发送给谁\n$smtpuser&nbsp; &nbsp; &nbsp; &nbsp;= \"Hi_HuPengCheng@163.com\"; //SMTP服务器的用户帐号，注：部分邮箱只需@前面的用户名\n$smtppass&nbsp; &nbsp; &nbsp; &nbsp;= \"111111a\"; //SMTP服务器的授权码\n$mailtitle&nbsp; &nbsp; &nbsp; = $_POST[\'title\']; //邮件主题\n$mailcontent&nbsp; &nbsp; = \"&lt;h1&gt;\" . $_POST[\'content\'] . \"&lt;/h1&gt;\"; //邮件内容\n$mailtype&nbsp; &nbsp; &nbsp; &nbsp;= \"HTML\"; //邮件格式（HTML/TXT）,TXT为文本邮件\n//************************ 配置信息 ****************************\n$smtp = new Smtp($smtpserver, $smtpserverport, true, $smtpuser, $smtppass); //这里面的一个true是表示使用身份验证,否则不使用身份验证.\n$smtp-&gt;debug = true; //是否显示发送的调试信息\n$state = $smtp-&gt;sendmail($smtpemailto, $smtpusermail, $mailtitle, $mailcontent, $mailtype);\n\necho \"&lt;div style=\'width:300px; margin:36px auto;\'&gt;\";\nif ($state == \"\") {\n&nbsp; &nbsp; echo \"对不起，邮件发送失败！请检查邮箱填写是否有误。\";\n&nbsp; &nbsp; echo \"&lt;a href=\'index.html\'&gt;点此返回&lt;/a&gt;\";\n&nbsp; &nbsp; exit();\n}\necho \"恭喜！邮件发送成功！！\";\necho \"&lt;a href=\'index.html\'&gt;点此返回&lt;/a&gt;\";\necho \"&lt;/div&gt;\";\n?&gt;<br></code></pre><p><span style=\"\">Smtp.class.php</span></p><pre><code class=\"lang-php\">&lt;?php\n\n/**\n&nbsp;* email smtp （support php7）\n&nbsp;*\n&nbsp;* Modified by: Reson 2017/06\n&nbsp;* UPDATE:\n&nbsp;* 1、change ereg to preg_match；change ereg_replace to preg_replace.\n&nbsp;* 2、change var to public/private.\n&nbsp;*\n&nbsp;* More: http://www.daixiaorui.com\n&nbsp;*\n&nbsp;*/\n\nclass Smtp\n{\n&nbsp; &nbsp; /* Public Variables */\n&nbsp; &nbsp; public $smtp_port;\n\n&nbsp; &nbsp; public $time_out;\n\n&nbsp; &nbsp; public $host_name;\n\n&nbsp; &nbsp; public $log_file;\n\n&nbsp; &nbsp; public $relay_host;\n\n&nbsp; &nbsp; public $debug;\n\n&nbsp; &nbsp; public $auth;\n\n&nbsp; &nbsp; public $user;\n\n&nbsp; &nbsp; public $pass;\n\n&nbsp; &nbsp; /* Private Variables */\n&nbsp; &nbsp; private $sock;\n\n&nbsp; &nbsp; /* Constractor */\n&nbsp; &nbsp; function __construct($relay_host = \"\", $smtp_port = 25, $auth = false, $user, $pass)\n&nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;debug = FALSE;\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;smtp_port = $smtp_port;\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;relay_host = $relay_host;\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;time_out = 30; //is used in fsockopen()\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;auth = $auth; //auth\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;user = $user;\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;pass = $pass;\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;host_name = \"localhost\"; //is used in HELO command\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_file = \"\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;sock = FALSE;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; /* Main Function */\n\n&nbsp; &nbsp; function sendmail($to, $from, $subject = \"\", $body = \"\", $mailtype, $cc = \"\", $bcc = \"\", $additional_headers = \"\")\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; $mail_from = $this-&gt;get_address($this-&gt;strip_comment($from));\n\n&nbsp; &nbsp; &nbsp; &nbsp; $body = preg_replace(\"/(^|(\\r\\n))(\\.)/\", \"\\1.\\3\", $body);\n\n&nbsp; &nbsp; &nbsp; &nbsp; $header = \"MIME-Version:1.0\\r\\n\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; if ($mailtype == \"HTML\") {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $header .= \"Content-Type:text/html\\r\\n\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; $header .= \"To: \" . $to . \"\\r\\n\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; if ($cc != \"\") {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $header .= \"Cc: \" . $cc . \"\\r\\n\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; $header .= \"From: $from&lt;\" . $from . \"&gt;\\r\\n\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; $header .= \"Subject: \" . $subject . \"\\r\\n\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; $header .= $additional_headers;\n\n&nbsp; &nbsp; &nbsp; &nbsp; $header .= \"Date: \" . date(\"r\") . \"\\r\\n\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; $header .= \"X-Mailer:By Redhat (PHP/\" . phpversion() . \")\\r\\n\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; list($msec, $sec) = explode(\" \", microtime());\n\n&nbsp; &nbsp; &nbsp; &nbsp; $header .= \"Message-ID: &lt;\" . date(\"YmdHis\", $sec) . \".\" . ($msec * 1000000) . \".\" . $mail_from . \"&gt;\\r\\n\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; $TO = explode(\",\", $this-&gt;strip_comment($to));\n\n&nbsp; &nbsp; &nbsp; &nbsp; if ($cc != \"\") {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $TO = array_merge($TO, explode(\",\", $this-&gt;strip_comment($cc)));\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; if ($bcc != \"\") {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $TO = array_merge($TO, explode(\",\", $this-&gt;strip_comment($bcc)));\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; $sent = TRUE;\n\n&nbsp; &nbsp; &nbsp; &nbsp; foreach ($TO as $rcpt_to) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $rcpt_to = $this-&gt;get_address($rcpt_to);\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$this-&gt;smtp_sockopen($rcpt_to)) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Error: Cannot send email to \" . $rcpt_to . \"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sent = FALSE;\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;smtp_send($this-&gt;host_name, $mail_from, $rcpt_to, $header, $body)) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"E-mail has been sent to &lt;\" . $rcpt_to . \"&gt;\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Error: Cannot send email to &lt;\" . $rcpt_to . \"&gt;\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sent = FALSE;\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fclose($this-&gt;sock);\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Disconnected from remote host\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; return $sent;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; /* Private Functions */\n\n&nbsp; &nbsp; function smtp_send($helo, $from, $to, $header, $body = \"\")\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!$this-&gt;smtp_putcmd(\"HELO\", $helo)) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_error(\"sending HELO command\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n//auth\n&nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;auth) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$this-&gt;smtp_putcmd(\"AUTH LOGIN\", base64_encode($this-&gt;user))) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_error(\"sending HELO command\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$this-&gt;smtp_putcmd(\"\", base64_encode($this-&gt;pass))) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_error(\"sending HELO command\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!$this-&gt;smtp_putcmd(\"MAIL\", \"FROM:&lt;\" . $from . \"&gt;\")) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_error(\"sending MAIL FROM command\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!$this-&gt;smtp_putcmd(\"RCPT\", \"TO:&lt;\" . $to . \"&gt;\")) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_error(\"sending RCPT TO command\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!$this-&gt;smtp_putcmd(\"DATA\")) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_error(\"sending DATA command\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!$this-&gt;smtp_message($header, $body)) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_error(\"sending message\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!$this-&gt;smtp_eom()) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_error(\"sending &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; [EOM]\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!$this-&gt;smtp_putcmd(\"QUIT\")) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_error(\"sending QUIT command\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; return TRUE;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function smtp_sockopen($address)\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;relay_host == \"\") {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_sockopen_mx($address);\n\n&nbsp; &nbsp; &nbsp; &nbsp; } else {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_sockopen_relay();\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function smtp_sockopen_relay()\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Trying to \" . $this-&gt;relay_host . \":\" . $this-&gt;smtp_port . \"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;sock = @stream_socket_client($this-&gt;relay_host . \':\' . $this-&gt;smtp_port, $errno, $errstr, $this-&gt;time_out);\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!($this-&gt;sock &amp;&amp; $this-&gt;smtp_ok())) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Error: Cannot connenct to relay host \" . $this-&gt;relay_host . \"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Error: \" . $errstr . \" (\" . $errno . \")\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return FALSE;\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Connected to relay host \" . $this-&gt;relay_host . \"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; return TRUE;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function smtp_sockopen_mx($address)\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; $domain = preg_replace(\"/^.+@([^@]+)$/\", \"\\1\", $address);\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!@getmxrr($domain, $MXHOSTS)) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Error: Cannot resolve MX \\\"\" . $domain . \"\\\"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return FALSE;\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n//专注与php学习 http://www.daixiaorui.com 欢迎您的访问\n\n&nbsp; &nbsp; &nbsp; &nbsp; foreach ($MXHOSTS as $host) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Trying to \" . $host . \":\" . $this-&gt;smtp_port . \"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;sock = @stream_socket_client($host . \':\' . $this-&gt;smtp_port, $errno, $errstr, $this-&gt;time_out);\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!($this-&gt;sock &amp;&amp; $this-&gt;smtp_ok())) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Warning: Cannot connect to mx host \" . $host . \"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Error: \" . $errstr . \" (\" . $errno . \")\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Connected to mx host \" . $host . \"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return TRUE;\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Error: Cannot connect to any mx hosts (\" . implode(\", \", $MXHOSTS) . \")\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; return FALSE;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function smtp_message($header, $body)\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; fputs($this-&gt;sock, $header . \"\\r\\n\" . $body);\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;smtp_debug(\"&gt; \" . str_replace(\"\\r\\n\", \"\\n\" . \"&gt; \", $header . \"\\n&gt; \" . $body . \"\\n&gt; \"));\n\n&nbsp; &nbsp; &nbsp; &nbsp; return TRUE;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function smtp_eom()\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; fputs($this-&gt;sock, \"\\r\\n.\\r\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;smtp_debug(\". [EOM]\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_ok();\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function smtp_ok()\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; $response = str_replace(\"\\r\\n\", \"\", fgets($this-&gt;sock, 512));\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;smtp_debug($response . \"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!preg_match(\"/^[23]/\", $response)) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fputs($this-&gt;sock, \"QUIT\\r\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fgets($this-&gt;sock, 512);\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Error: Remote host returned \\\"\" . $response . \"\\\"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return FALSE;\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; return TRUE;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function smtp_putcmd($cmd, $arg = \"\")\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; if ($arg != \"\") {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($cmd == \"\") {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $cmd = $arg;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $cmd = $cmd . \" \" . $arg;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; fputs($this-&gt;sock, $cmd . \"\\r\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;smtp_debug(\"&gt; \" . $cmd . \"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;smtp_ok();\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function smtp_error($string)\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;log_write(\"Error: Error occurred while \" . $string . \".\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; return FALSE;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function log_write($message)\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;smtp_debug($message);\n\n&nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;log_file == \"\") {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return TRUE;\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; $message = date(\"M d H:i:s \") . get_current_user() . \"[\" . getmypid() . \"]: \" . $message;\n\n&nbsp; &nbsp; &nbsp; &nbsp; if (!@file_exists($this-&gt;log_file) || !($fp = @fopen($this-&gt;log_file, \"a\"))) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;smtp_debug(\"Warning: Cannot open log file \\\"\" . $this-&gt;log_file . \"\\\"\\n\");\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return FALSE;\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; flock($fp, LOCK_EX);\n\n&nbsp; &nbsp; &nbsp; &nbsp; fputs($fp, $message);\n\n&nbsp; &nbsp; &nbsp; &nbsp; fclose($fp);\n\n&nbsp; &nbsp; &nbsp; &nbsp; return TRUE;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function strip_comment($address)\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; $comment = \"/\\([^()]*\\)/\";\n\n&nbsp; &nbsp; &nbsp; &nbsp; while (preg_match($comment, $address)) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $address = preg_replace($comment, \"\", $address);\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; &nbsp; &nbsp; return $address;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function get_address($address)\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; $address = preg_replace(\"/([ \\t\\r\\n])+/\", \"\", $address);\n\n&nbsp; &nbsp; &nbsp; &nbsp; $address = preg_replace(\"/^.*&lt;(.+)&gt;.*$/\", \"\\1\", $address);\n\n&nbsp; &nbsp; &nbsp; &nbsp; return $address;\n\n&nbsp; &nbsp; }\n\n&nbsp; &nbsp; function smtp_debug($message)\n&nbsp; &nbsp; {\n\n&nbsp; &nbsp; &nbsp; &nbsp; if ($this-&gt;debug) {\n\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo $message;\n\n&nbsp; &nbsp; &nbsp; &nbsp; }\n\n&nbsp; &nbsp; }\n\n}\n\n?&gt;<br></code></pre>', 'PHP实现邮件发送', '胡鹏成的个人博客', '胡鹏成', 1557543857, NULL, 1, '', 0);

-- ----------------------------
-- Table structure for think_auth
-- ----------------------------
DROP TABLE IF EXISTS `think_auth`;
CREATE TABLE `think_auth`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `pid` int(10) NULL DEFAULT NULL COMMENT '上级id',
  `name` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '名称',
  `permission` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '权限',
  `status` int(1) NULL DEFAULT 0,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 4 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Records of think_auth
-- ----------------------------
INSERT INTO `think_auth` VALUES (1, 0, '后台主页', 'admin/index/index', 1);
INSERT INTO `think_auth` VALUES (2, 0, '网站配置', 'admin/config/index', 1);
INSERT INTO `think_auth` VALUES (3, 0, '用户管理', 'admin/user/index', 1);

-- ----------------------------
-- Table structure for think_cate
-- ----------------------------
DROP TABLE IF EXISTS `think_cate`;
CREATE TABLE `think_cate`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `pid` int(11) NULL DEFAULT 0 COMMENT '上级栏目id',
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '栏目名称',
  `type` int(11) NULL DEFAULT 0 COMMENT '栏目类型',
  `status` int(11) NULL DEFAULT NULL COMMENT '状态',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 12 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Records of think_cate
-- ----------------------------
INSERT INTO `think_cate` VALUES (1, 0, '关于博主', 1, 1);
INSERT INTO `think_cate` VALUES (2, 1, '关于博主', 1, 1);
INSERT INTO `think_cate` VALUES (3, 0, '前端手记', 1, 1);
INSERT INTO `think_cate` VALUES (4, 3, 'JavaScript', 2, 1);
INSERT INTO `think_cate` VALUES (5, 0, '后端手记', 1, 1);
INSERT INTO `think_cate` VALUES (6, 5, 'PHP', 3, 1);
INSERT INTO `think_cate` VALUES (7, 3, 'jQuery', 2, 1);
INSERT INTO `think_cate` VALUES (8, 0, '又臭又硬', 1, 1);
INSERT INTO `think_cate` VALUES (9, 8, 'Windows', 3, 1);
INSERT INTO `think_cate` VALUES (10, 8, 'Linux', 3, 1);
INSERT INTO `think_cate` VALUES (11, 8, 'Mysql', 2, 1);

-- ----------------------------
-- Table structure for think_comment
-- ----------------------------
DROP TABLE IF EXISTS `think_comment`;
CREATE TABLE `think_comment`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `cid` int(11) NULL DEFAULT NULL COMMENT '栏目id',
  `nickname` varchar(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL,
  `email` varchar(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL,
  `url` varchar(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL,
  `content` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = latin1 COLLATE = latin1_swedish_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Table structure for think_config
-- ----------------------------
DROP TABLE IF EXISTS `think_config`;
CREATE TABLE `think_config`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '网站名称',
  `keyword` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `description` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `copyright` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '版权',
  `company` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备案',
  `status` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `address` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `email` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `phone` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `qq` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `wechat` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 2 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Records of think_config
-- ----------------------------
INSERT INTO `think_config` VALUES (1, '胡鹏成的个人博客', '胡鹏成', '胡鹏成的个人博客', 'HuPengCheng_', '陇ICP备18002480号', '1', '甘肃省兰州市', 'Hi_HuPengCheng@163.com', '15117235969', '1093600435', 'HXDD1994');

-- ----------------------------
-- Table structure for think_link
-- ----------------------------
DROP TABLE IF EXISTS `think_link`;
CREATE TABLE `think_link`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `url` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `type` tinyint(255) NULL DEFAULT NULL,
  `pic` varchar(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL,
  `status` tinyint(255) NULL DEFAULT 1,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = latin1 COLLATE = latin1_swedish_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Records of think_link
-- ----------------------------
INSERT INTO `think_link` VALUES (1, '??', '???', 1, NULL, 1);
INSERT INTO `think_link` VALUES (2, '啊实打实', '阿萨德萨达', 1, NULL, 1);
INSERT INTO `think_link` VALUES (3, '百度', 'http://www.blog.com/', 1, NULL, 1);
INSERT INTO `think_link` VALUES (4, '测试哦', 'http://www.blog.com/create/2.html', 2, '/uploads/20190424/5fc2a58245cfa40c965668893485822c.png', 1);

-- ----------------------------
-- Table structure for think_log
-- ----------------------------
DROP TABLE IF EXISTS `think_log`;
CREATE TABLE `think_log`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `mid` int(10) NULL DEFAULT NULL COMMENT '当前用户id',
  `ip` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'ip',
  `time` int(11) NULL DEFAULT NULL COMMENT '登录时间',
  `msg` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '登录状态',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 236 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Records of think_log
-- ----------------------------
INSERT INTO `think_log` VALUES (197, 1, '127.0.0.1', 1552122169, '登录成功');
INSERT INTO `think_log` VALUES (198, 1, '127.0.0.1', 1552266736, '登录成功');
INSERT INTO `think_log` VALUES (199, 1, '127.0.0.1', 1552269348, '登录成功');
INSERT INTO `think_log` VALUES (200, 1, '127.0.0.1', 1552274281, '登录成功');
INSERT INTO `think_log` VALUES (201, 1, '127.0.0.1', 1552285504, '登录成功');
INSERT INTO `think_log` VALUES (202, 1, '127.0.0.1', 1552354835, '登录成功');
INSERT INTO `think_log` VALUES (203, 1, '127.0.0.1', 1552369378, '登录成功');
INSERT INTO `think_log` VALUES (204, 1, '127.0.0.1', 1552375387, '登录成功');
INSERT INTO `think_log` VALUES (205, 1, '127.0.0.1', 1552377417, '登录成功');
INSERT INTO `think_log` VALUES (206, 1, '127.0.0.1', 1552446417, '登录成功');
INSERT INTO `think_log` VALUES (207, 1, '127.0.0.1', 1552524467, '登录成功');
INSERT INTO `think_log` VALUES (208, 1, '127.0.0.1', 1552549466, '登录成功');
INSERT INTO `think_log` VALUES (209, 1, '127.0.0.1', 1552611307, '登录成功');
INSERT INTO `think_log` VALUES (210, 1, '127.0.0.1', 1552719770, '登录成功');
INSERT INTO `think_log` VALUES (211, 2, '127.0.0.1', 1552871792, '密码输入不正确');
INSERT INTO `think_log` VALUES (212, 1, '127.0.0.1', 1552872443, '登录成功');
INSERT INTO `think_log` VALUES (213, 2, '127.0.0.1', 1552872636, '登录成功');
INSERT INTO `think_log` VALUES (214, 2, '127.0.0.1', 1552872742, '登录成功');
INSERT INTO `think_log` VALUES (215, 2, '127.0.0.1', 1552873000, '登录成功');
INSERT INTO `think_log` VALUES (216, 2, '127.0.0.1', 1552873404, '登录成功');
INSERT INTO `think_log` VALUES (217, 2, '127.0.0.1', 1552874265, '登录成功');
INSERT INTO `think_log` VALUES (218, 1, '127.0.0.1', 1552879838, '登录成功');
INSERT INTO `think_log` VALUES (219, 2, '127.0.0.1', 1552889369, '登录成功');
INSERT INTO `think_log` VALUES (220, 3, '127.0.0.1', 1552890072, '登录成功');
INSERT INTO `think_log` VALUES (221, 1, '127.0.0.1', 1552891980, '登录成功');
INSERT INTO `think_log` VALUES (222, 1, '127.0.0.1', 1553751901, '登录成功');
INSERT INTO `think_log` VALUES (223, 1, '127.0.0.1', 1554858103, '登录成功');
INSERT INTO `think_log` VALUES (224, 1, '127.0.0.1', 1555145739, '登录成功');
INSERT INTO `think_log` VALUES (225, 1, '127.0.0.1', 1555402812, '登录成功');
INSERT INTO `think_log` VALUES (226, 1, '127.0.0.1', 1555558192, '登录成功');
INSERT INTO `think_log` VALUES (227, 1, '127.0.0.1', 1555728084, '密码输入不正确');
INSERT INTO `think_log` VALUES (228, 1, '127.0.0.1', 1555728093, '密码输入不正确');
INSERT INTO `think_log` VALUES (229, 1, '127.0.0.1', 1555728104, '密码输入不正确');
INSERT INTO `think_log` VALUES (230, 1, '127.0.0.1', 1555728120, '登录成功');
INSERT INTO `think_log` VALUES (231, 1, '127.0.0.1', 1556069173, '登录成功');
INSERT INTO `think_log` VALUES (232, 1, '127.0.0.1', 1557365922, '登录成功');
INSERT INTO `think_log` VALUES (233, 1, '42.92.147.160', 1557478466, '登录成功');
INSERT INTO `think_log` VALUES (234, 1, '42.92.147.160', 1557536379, '登录成功');
INSERT INTO `think_log` VALUES (235, 1, '42.92.147.160', 1557713148, '登录成功');

-- ----------------------------
-- Table structure for think_role
-- ----------------------------
DROP TABLE IF EXISTS `think_role`;
CREATE TABLE `think_role`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '规则名称',
  `status` int(1) NULL DEFAULT 0 COMMENT '状态',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Records of think_role
-- ----------------------------
INSERT INTO `think_role` VALUES (1, '超级管理员', 1);
INSERT INTO `think_role` VALUES (2, '测试用户', 1);

-- ----------------------------
-- Table structure for think_role_auth
-- ----------------------------
DROP TABLE IF EXISTS `think_role_auth`;
CREATE TABLE `think_role_auth`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `role_id` int(11) NULL DEFAULT NULL COMMENT '角色id',
  `auth_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '权限id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Records of think_role_auth
-- ----------------------------
INSERT INTO `think_role_auth` VALUES (1, 1, '1,2,5,7,8,9,10,11,12,14,15,16,17,18,19,27,21,22,23,24,25,26,3,30,31,32,33,34,48,35,36,37,38,39,40,41,4,42,43,44,45,46,47');
INSERT INTO `think_role_auth` VALUES (2, 2, '1,2,12,19,26,3,48,40,41,4,47');

-- ----------------------------
-- Table structure for think_user
-- ----------------------------
DROP TABLE IF EXISTS `think_user`;
CREATE TABLE `think_user`  (
  `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `pic` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `account` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '账号',
  `nickname` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '昵称',
  `password` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '密码',
  `status` int(1) NULL DEFAULT 0 COMMENT '状态',
  `phone` varchar(11) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '手机',
  `email` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '邮箱',
  `type` int(11) NULL DEFAULT NULL COMMENT '账号类型1后台2前台',
  `create_time` int(11) NULL DEFAULT NULL COMMENT '添加时间',
  `update_time` int(11) NULL DEFAULT NULL COMMENT '修改时间',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Records of think_user
-- ----------------------------
INSERT INTO `think_user` VALUES (1, '/uploads/20190513/31ac29dabce73de60e60a188d69bd20e.jpg', 'admin', '胡鹏程', '49dec5fb8af4eeef7c95e7f5c66c8ae6', 1, '15117235969', 'Hi_HuPengCheng@163.com', 1, 1557714249, 1557716595);
INSERT INTO `think_user` VALUES (2, '', 'ceshi', '测试用户', 'cc17c30cd111c7215fc8f51f8790e0e1', 1, '13893456345', '123@qq.com', 1, 1557726137, 1557726137);

-- ----------------------------
-- Table structure for think_user_role
-- ----------------------------
DROP TABLE IF EXISTS `think_user_role`;
CREATE TABLE `think_user_role`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NULL DEFAULT NULL COMMENT '用户id',
  `role_id` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '角色id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

-- ----------------------------
-- Records of think_user_role
-- ----------------------------
INSERT INTO `think_user_role` VALUES (1, 1, '1');
INSERT INTO `think_user_role` VALUES (2, 2, '2');

SET FOREIGN_KEY_CHECKS = 1;
